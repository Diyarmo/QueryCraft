## تسک فنی: پروژه QueryCraft

### ۱. سناریو و هدف اصلی  
در بیت‌پین، ما به دنبال این هستیم که به همکاران غیرفنی خود (مثلا در تیم‌های مارکتینگ و محصول) این امکان را بدهیم که بتوانند با استفاده از زبان فارسی یا انگلیسی، سوالات خود را از دیتابیس‌های ما بپرسند و جواب بگیرند.  
**وظیفه شما:**  
ساخت یک اپلیکیشن وب کوچک است که یک سوال به زبان طبیعی (مثلا «در ماه گذشته چند کاربر جدید ثبت نام کرده‌اند؟») را دریافت کرده، آن را با استفاده از یک عامل هوش مصنوعی (AI Agent) به یک کوئری SQL تبدیل کند، از دیتابیس اطلاعات را استخراج کرده و نتیجه را برگرداند.

### ۲. جزئیات فنی و مراحل انجام کار

#### مرحله اول: راه‌اندازی کامل پروژه با Docker  
پروژه باید کاملا داکرایز شده باشد. لطفا یک فایل docker-compose.yml ارائه دهید که سه سرویس اصلی را مدیریت کند:  
- web: برای اپلیکیشن شما (ترجیحا با Django).  
- db: برای دیتابیس PostgreSQL.  
- ollama: برای سرویس‌دهی مدل زبان بزرگ LLM به صورت محلی. این سرویس باید مدل sqlcoder-7b-2.Q4_K_M.gguf را بارگذاری و اجرا کند.

#### مرحله دوم: ساخت و آماده‌سازی دیتابیس  
اسکیمای دیتابیس شامل سه جدول زیر است. لطفا این مدل‌ها را در جنگو (یا معادل آن در پایتون) تعریف کنید:  
- customers (id, name, email, registration_date)  
- products (id, name, category, price)  
- orders (id, customer_id, product_id, order_date, quantity, status)  

یک اسکریپت یا دستور مدیریتی (مانند manage.py seed_db) ایجاد کنید که با استفاده از کتابخانه Faker، دیتابیس را با داده‌های ساختگی (حداقل ۱۰۰۰ رکورد) پر کند.  
نکته کلیدی: حواستان به حفظ یکپارچگی داده (Referential Integrity) باشد. برای مثال customer_id در جدول orders باید به یک id معتبر در جدول customers اشاره کند.

#### مرحله سوم: پیاده‌سازی منطق عامل هوش مصنوعی با LangGraph  
برای ساخت گردش کار (workflow) عامل، باید از کتابخانه LangGraph استفاده کنید.  
- گراف شما باید یک یال شرطی (Conditional Edge) داشته باشد که گره‌ها و مسیرها را بر اساس اعتبار کوئری SQL تولید شده، مدیریت کند.  
- گردش کار باید شامل مراحل:  
  ۱. یک گره برای تولید کوئری SQL از سوال کاربر با استفاده از مدل Ollama.  
  ۲. یک گره برای اعتبارسنجی اولیه کوئری تولید شده (مثلا چک کردن وجود کلمات کلیدی SELECT و FROM).  
  ۳. یال شرطی: اگر کوئری معتبر بود، گراف به گره اجرای کوئری برود، در غیر این صورت با پیام خطا پایان یابد.

#### مرحله چهارم: ساخت API و رابط کاربری  
- یک API endpoint (مثلا /api/query/) بسازید که درخواست‌های POST را بپذیرد. این endpoint باید یک JSON حاوی سوال کاربر را دریافت و پاسخ نهایی را در قالب JSON برگرداند.  
- برای فرانت‌اند، یک صفحه ساده تولید شده با هوش مصنوعی کافی است. از یک LLM کمک بگیرید تا یک صفحه ساده HTML و JavaScript برایتان تولید کند که بتواند با API تعامل کند.

### ۳. فلسفه ما و رویکرد شما
- استفاده از هوش مصنوعی در تمام مراحل توسعه اشکالی ندارد، اما باید خروجی‌ها را کاملا درک کرده و به درستی استفاده کنید.  
- پیشنهاد ما استفاده از Django است؛ اگر آشنایی ندارید، این فرصت خوبی برای یادگیری است.  
- هدف ما سنجش قدرت حل مسئله شما است. هر سوال یا ابهامی داشتید، بهترین فرض خود را در یک فایل info.md یادداشت کنید و با همان پیش بروید.  
- کدنویسی تمیز و کامنت‌گذاری مناسب برای کدها مهم است.  
- اگر بخشی را بلد نبودید، جای آن کار دیگری انجام دهید و آن را در info.md ذکر کنید.

### ۴. خروجی‌های مورد انتظار
- لینک یک ریپازیتوری گیت پابلیک که شامل موارد زیر باشد:  
  ۱. کد کامل پروژه شامل تمام فایل‌های اپلیکیشن، داکر و فرانت‌اند  
  ۲. فایل README.md کامل با دستورالعمل واضح برای راه‌اندازی و اجرای پروژه فقط با دستور docker-compose up و توضیح معماری عامل و تصمیمات فنی  
  ۳. فایل info.md شامل لیست فرضیات یا تغییرات اعمال شده در طراحی اولیه 